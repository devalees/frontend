
> frontend@1.0.0 test
> vitest run --reporter=verbose src/tests/performance/componentSplitting.test.tsx

[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m

 RUN  v1.6.1 /home/ehab/Desktop/frontend

stdout | src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Component Loading > should lazy load component when needed
[TEST] Setting up test with cleared mocks
[TEST] Running test: should lazy load component when needed
[TEST] Performance spy initialized
[TEST] Starting component loading with act()
[TEST] mockLoadComponent implementation executing

stdout | src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Component Loading > should lazy load component when needed
[TEST] mockLoadComponent returning TestComponent
[TEST] Component loading completed
[TEST] Checking performance marks
[TEST] Verifying loadComponent was called with correct ID
[TEST] Test completed, current mock state: {
  loadComponent: 1,
  preloadComponent: 0,
  registerComponent: 0,
  lazyLoadComponent: 0,
  errorBoundary: 0,
  getComponent: 0
}

stdout | src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Component Loading > should measure component render performance
[TEST] Setting up test with cleared mocks
[TEST] Running test: should measure component render performance
[TEST] Performance spy initialized for render metrics
[TEST] Starting component loading with act() for render test
[TEST] mockLoadComponent implementation executing with render metrics

stdout | src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Component Loading > should measure component render performance
[TEST] mockLoadComponent returning TestComponent with render metrics
[TEST] Component loading and render test completed
[TEST] Checking render performance marks
[TEST] Test completed, current mock state: {
  loadComponent: 1,
  preloadComponent: 0,
  registerComponent: 0,
  lazyLoadComponent: 0,
  errorBoundary: 0,
  getComponent: 0
}

stdout | src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Lazy Loading > should preload component on demand
[TEST] Setting up test with cleared mocks
[TEST] Running test: should preload component on demand
[TEST] Performance spy initialized for preload test
[TEST] Starting component preloading with act()
[TEST] mockPreloadComponent implementation executing

stdout | src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Lazy Loading > should preload component on demand
[TEST] mockPreloadComponent completed
[TEST] Component preloading completed
[TEST] Verifying preload calls and performance
[TEST] Test completed, current mock state: {
  loadComponent: 0,
  preloadComponent: 1,
  registerComponent: 0,
  lazyLoadComponent: 0,
  errorBoundary: 0,
  getComponent: 0
}

stdout | src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Lazy Loading > should register component for optimal loading
[TEST] Setting up test with cleared mocks
[TEST] Running test: should register component for optimal loading
[TEST] mockRegisterComponent setup to return mockComponent
[TEST] Calling registerComponent
[TEST] registerComponent call completed
[TEST] Verifying register calls and result
[TEST] Test completed, current mock state: {
  loadComponent: 0,
  preloadComponent: 0,
  registerComponent: 1,
  lazyLoadComponent: 0,
  errorBoundary: 0,
  getComponent: 0
}

stdout | src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Lazy Loading > should track component dependency loading times
[TEST] Setting up test with cleared mocks
[TEST] Running test: should track component dependency loading times
[TEST] Performance spy initialized for dependency test
[TEST] Starting component loading with dependencies
[TEST] mockLoadComponent implementation executing for dependency test

stdout | src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Lazy Loading > should track component dependency loading times
[TEST] mockLoadComponent returning TestComponent with dependency metrics
[TEST] Component loading with dependencies completed
[TEST] Verifying dependency loading performance
[TEST] Test completed, current mock state: {
  loadComponent: 1,
  preloadComponent: 0,
  registerComponent: 0,
  lazyLoadComponent: 0,
  errorBoundary: 0,
  getComponent: 0
}

stdout | src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Error Boundaries > should handle component loading errors gracefully
[TEST] Setting up test with cleared mocks
[TEST] Running test: should handle component loading errors gracefully
[TEST] Performance spy initialized for error test
[TEST] Rendering ComponentErrorBoundary with error-throwing component
[TEST] Error caught in mock getDerivedStateFromError: Failed to load component
[TEST] Error caught in mock getDerivedStateFromError: Failed to load component
[TEST] Error caught in mock getDerivedStateFromError: Failed to load component
[TEST] Error caught in mock getDerivedStateFromError: Failed to load component
[TEST] Test completed, current mock state: {
  loadComponent: 0,
  preloadComponent: 0,
  registerComponent: 0,
  lazyLoadComponent: 0,
  errorBoundary: 0,
  getComponent: 0
}

stderr | src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Error Boundaries > should handle component loading errors gracefully
Error: Uncaught [Error: Failed to load component]
    at reportException (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:27451:7)
    at performUnitOfWork (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:26560:12) Error: Failed to load component
    at ErrorThrowingComponent (/home/ehab/Desktop/frontend/src/tests/performance/componentSplitting.test.tsx:126:11)
    at renderWithHooks (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:16305:18)
    at mountIndeterminateComponent (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:20074:13)
    at beginWork (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:21587:16)
    at HTMLUnknownElement.callCallback (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
Error: Uncaught [Error: Failed to load component]
    at reportException (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:27451:7)
    at performUnitOfWork (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:26560:12) Error: Failed to load component
    at ErrorThrowingComponent (/home/ehab/Desktop/frontend/src/tests/performance/componentSplitting.test.tsx:126:11)
    at renderWithHooks (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:16305:18)
    at mountIndeterminateComponent (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:20074:13)
    at beginWork (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:21587:16)
    at HTMLUnknownElement.callCallback (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
The above error occurred in the <TestErrorBoundary> component:

    at TestErrorBoundary (/home/ehab/Desktop/frontend/src/tests/performance/componentSplitting.test.tsx:69:5)
    at Suspense

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stdout | src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Error Boundaries > should provide detailed error information with componentId
[TEST] Setting up test with cleared mocks
[TEST] Running test: should provide detailed error information
[TEST] Performance spy initialized for detailed error test
[TEST] Rendering ComponentErrorBoundary with detailed error
[TEST] Error caught in mock getDerivedStateFromError: Failed to load component
[TEST] Error caught in mock getDerivedStateFromError: Failed to load component
[TEST] Test completed, current mock state: {
  loadComponent: 0,
  preloadComponent: 0,
  registerComponent: 0,
  lazyLoadComponent: 0,
  errorBoundary: 0,
  getComponent: 0
}

stderr | src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Error Boundaries > should provide detailed error information with componentId
Error: Uncaught [Error: Failed to load component]
    at reportException (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:27451:7)
    at performUnitOfWork (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:26560:12) Error: Failed to load component
    at ErrorThrowingComponent (/home/ehab/Desktop/frontend/src/tests/performance/componentSplitting.test.tsx:126:11)
    at renderWithHooks (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:16305:18)
    at mountIndeterminateComponent (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:20074:13)
    at beginWork (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:21587:16)
    at HTMLUnknownElement.callCallback (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
Error: Uncaught [Error: Failed to load component]
    at reportException (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:27451:7)
    at performUnitOfWork (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:26560:12) Error: Failed to load component
    at ErrorThrowingComponent (/home/ehab/Desktop/frontend/src/tests/performance/componentSplitting.test.tsx:126:11)
    at renderWithHooks (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:16305:18)
    at mountIndeterminateComponent (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:20074:13)
    at beginWork (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:21587:16)
    at HTMLUnknownElement.callCallback (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
The above error occurred in the <TestErrorBoundary> component:

    at TestErrorBoundary (/home/ehab/Desktop/frontend/src/tests/performance/componentSplitting.test.tsx:69:5)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

stdout | src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Error Boundaries > should allow retry of failed component loading
[TEST] Setting up test with cleared mocks
[TEST] Running test: should allow retry of failed component loading
[TEST] Performance spy initialized for retry test
[TEST] Rendering ComponentErrorBoundary for retry test
[TEST] Error caught in mock getDerivedStateFromError: Failed to load component
[TEST] Error caught in mock getDerivedStateFromError: Failed to load component
[TEST] Test completed, current mock state: {
  loadComponent: 0,
  preloadComponent: 0,
  registerComponent: 0,
  lazyLoadComponent: 0,
  errorBoundary: 0,
  getComponent: 0
}

stderr | src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Error Boundaries > should allow retry of failed component loading
Error: Uncaught [Error: Failed to load component]
    at reportException (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:27451:7)
    at performUnitOfWork (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:26560:12) Error: Failed to load component
    at TestRetryComponent (/home/ehab/Desktop/frontend/src/tests/performance/componentSplitting.test.tsx:464:17)
    at renderWithHooks (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:16305:18)
    at mountIndeterminateComponent (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:20074:13)
    at beginWork (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:21587:16)
    at HTMLUnknownElement.callCallback (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
Error: Uncaught [Error: Failed to load component]
    at reportException (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:66:24)
    at innerInvokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:353:9)
    at invokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
    at HTMLUnknownElement.dispatchEvent (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:241:34)
    at Object.invokeGuardedCallbackDev (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:4213:16)
    at invokeGuardedCallback (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:4277:31)
    at beginWork$1 (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:27451:7)
    at performUnitOfWork (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:26560:12) Error: Failed to load component
    at TestRetryComponent (/home/ehab/Desktop/frontend/src/tests/performance/componentSplitting.test.tsx:464:17)
    at renderWithHooks (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:16305:18)
    at mountIndeterminateComponent (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:20074:13)
    at beginWork (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:21587:16)
    at HTMLUnknownElement.callCallback (/home/ehab/Desktop/frontend/node_modules/react-dom/cjs/react-dom.development.js:4164:14)
    at HTMLUnknownElement.callTheUserObjectsOperation (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/generated/EventListener.js:26:30)
    at innerInvokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:350:25)
    at invokeEventListeners (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:286:3)
    at HTMLUnknownElementImpl._dispatch (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLUnknownElementImpl.dispatchEvent (/home/ehab/Desktop/frontend/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:104:17)
The above error occurred in the <TestErrorBoundary> component:

    at TestErrorBoundary (/home/ehab/Desktop/frontend/src/tests/performance/componentSplitting.test.tsx:69:5)
    at RetryTestWrapper (/home/ehab/Desktop/frontend/src/tests/performance/componentSplitting.test.tsx:412:71)

Consider adding an error boundary to your tree to customize error handling behavior.
Visit https://reactjs.org/link/error-boundaries to learn more about error boundaries.

 ✓ src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Component Loading > should lazy load component when needed
 ✓ src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Component Loading > should measure component render performance
 ✓ src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Lazy Loading > should preload component on demand
 ✓ src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Lazy Loading > should register component for optimal loading
 ✓ src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Lazy Loading > should track component dependency loading times
 × src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Error Boundaries > should handle component loading errors gracefully
   → Cannot read properties of undefined (reading 'message')
 × src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Error Boundaries > should provide detailed error information with componentId
   → Cannot read properties of undefined (reading 'message')
 × src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Error Boundaries > should allow retry of failed component loading
   → Cannot read properties of undefined (reading 'message')

⎯⎯⎯⎯⎯⎯⎯ Failed Tests 3 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Error Boundaries > should handle component loading errors gracefully
 FAIL  src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Error Boundaries > should provide detailed error information with componentId
 FAIL  src/tests/performance/componentSplitting.test.tsx > Component-based Code Splitting > Error Boundaries > should allow retry of failed component loading
TypeError: Cannot read properties of undefined (reading 'message')
 ❯ ErrorComponent src/tests/performance/componentSplitting.test.tsx:14:45
     12| const ErrorComponent = ({ error, retry }: { error: any; retry: () => v…
     13|   <div data-testid="error-boundary">
     14|     <div data-testid="error-message">{error.message}</div>
       |                                             ^
     15|     {error.componentId && <div data-testid="error-component-id">{error…
     16|     <button data-testid="retry-button" onClick={retry}>Retry</button>
 ❯ TestErrorBoundary.render src/tests/performance/componentSplitting.test.tsx:101:16
 ❯ finishClassComponent node_modules/react-dom/cjs/react-dom.development.js:19752:31
 ❯ updateClassComponent node_modules/react-dom/cjs/react-dom.development.js:19698:24
 ❯ beginWork node_modules/react-dom/cjs/react-dom.development.js:21611:16
 ❯ beginWork$1 node_modules/react-dom/cjs/react-dom.development.js:27426:14
 ❯ performUnitOfWork node_modules/react-dom/cjs/react-dom.development.js:26560:12
 ❯ workLoopSync node_modules/react-dom/cjs/react-dom.development.js:26466:5
 ❯ renderRootSync node_modules/react-dom/cjs/react-dom.development.js:26434:7
 ❯ recoverFromConcurrentError node_modules/react-dom/cjs/react-dom.development.js:25850:20

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/3]⎯

 Test Files  1 failed (1)
      Tests  3 failed | 5 passed (8)
   Start at  22:08:08
   Duration  1.79s (transform 254ms, setup 335ms, collect 228ms, tests 112ms, environment 513ms, prepare 106ms)

